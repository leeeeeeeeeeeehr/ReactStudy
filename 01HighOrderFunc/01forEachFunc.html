<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script>
  
  /* forEach() 함수
  - array의 크기(= n번)만큼 반복하여 콜백함수를 호출한다.
  - thisArgs는 콜백함수 내에서 인수로 사용할 수 있다. this.xx와 같이 사용한다.
    단, 필요없는 경우에는 생략이 가능하다.
  - 반환값은 별도로 없다.
  
  형식 ) 배열변수.forEach(콜백함수(), thisArgs); */

  function forEachTest1() {
    console.error("forEachTest1() - 기본 사용법");
    var oldArray = [1, 2, 3, 4, 5];
    /* currentVal: 현재 루프의 원소를 반환한다.
    index: 인덱스를 반환한다. 0부터 시작한다.
    array: 반복을 위한 배열 자체를 반환한다. */
    oldArray.forEach(function(currentVal, index, array) {
      console.log('현재 값: ' + currentVal, '인덱스: '+ index, '배열: ' + array);
    });
  };

  function forEachTest2() {
    console.error("forEachTest2() - 배열 요소의 합계");
    var oldArray = [1, 2, 3, 4, 5];
    var sum = 0;
    /* forEach 함수 내에서 사용할 콜백함수를 별도로 선언한다.
    매개변수는 3개를 사용할 수 있지만 필요없는 경우에는 생략할 수 있다. */
    function getSum(currentVal) {
      sum += currentVal;
    }
    oldArray.forEach(getSum);
    // 1 ~ 5까지의 합을 출력한다.
    console.log(sum);
  }

  function forEachTest3() {
    console.error("forEachTest3() - args 매개변수 사용하기");
    var oldArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    var sum = 0;
    // 콜백함수에서 사용할 인자(= thisArgs)를 객체로 정의한다.
    var myArgs = {min: 3, max: 7};
    // 콜백함수 정의
    function getSum(currentVal) {
      /* myArgs는 'this.키'와 같은 형태로 사용할 수 있다.
      즉, 3 이상 7 이하의 조건에 맞는 숫자만 sum에 누적되어 더해진다. */
      if (currentVal >= this.min && currentVal <= this.max) {
        sum += currentVal;
      }
    }
    oldArray.forEach(getSum, myArgs);
    console.log(sum);
  }
</script>
<body>
  <h2>고차함수 - forEach()</h2>
  <div>
    <input type="button" onclick="forEachTest1();" value="forEach1">
    <input type="button" onclick="forEachTest2();" value="forEach2">
    <input type="button" onclick="forEachTest3();" value="forEach3">
  </div>
</body>
</html>